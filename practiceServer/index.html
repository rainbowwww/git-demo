<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./style.css">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
    <h5>您的账户余额是<span id="amount">&&&amount&&&</span>></h5>
    <button id="button">打钱</button>
    <!-- <form action="/pay" method="POST" target="result"> 
     <input type="submit" value="付款">   
    </form>
    <iframe src="about:blank" name ='result'  height="200" frameborder="0"></iframe> -->

</body>
<script>
   
  button.addEventListener('click',function(){
      $.ajax({
          url:'http://jack.com:8002/pay',
          dataType:'jsonp',
          success:function(response){
              if(response==='success'){
                  amount.innerText = amount.innerText-1
              }

          }
        })





    //script 请求
    //   let script = document.createElement('script')
    //   let functionName = 'frank'+parseInt(Math.random()*100000,10)
    //   window[functionName] = function(result){
    //     if(result==='success'){
    //         amount.innerText = amount.innerText-1
    //     }else{

    //     }
    //   }
    //   script.src = 'http://jack.com:8002/pay?callback='+functionName
    //   document.body.appendChild(script)
    //   script.onload = function(e){
          
    //       e.currentTarget.remove()
    //       delete window[functionName]
    //   }
    //   script.onerror = function(){
          
    //       e.currentTarget.remove()
    //   }


    //img请求
    //   var image = document.createElement('img');
    //   image.src = '/pay'
    // window.location.reload()
  })
</script>
<script src="./main.js"></script>
</html>